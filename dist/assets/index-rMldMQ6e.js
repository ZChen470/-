import{r as q,D as b,E as j,F as G,B as y,q as S,G as n,H as a,y as M,I as m,J as e,a as K,L as J,M as D,N as Q,f as X,O as k,P as L,Q as F,w as Y,x as C,K as Z,R as ee,i as $,S as te,U as ae,p as oe}from"./@vue-HJy6yETU.js";import{d as U,m as se,E as le,t as ne}from"./quasar-DGJ4ETvE.js";import{c as re,a as ce}from"./vue-router-BE74E5pN.js";import"./file-saver-DUjdL8Zb.js";import{s as V}from"./streamsaver-DulZ9NiE.js";import{a as I}from"./axios-DBFezj-0.js";/* empty css                */(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function l(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(t){if(t.ep)return;t.ep=!0;const r=l(t);fetch(t.href,r)}})();const ie={class:"welcome text-h1 text-weight-bolder"},de=S({name:"AppHome"}),_e=Object.assign(de,{setup(i){let c=q("Welcome! ^_^");return(l,u)=>(b(),j("div",ie,G(y(c)),1))}}),pe={class:"q-pa-md"},ue=e("thead",null,[e("tr",null,[e("th",{class:"text-left"},"Dessert (100g serving)"),e("th",{class:"text-right"},"Calories"),e("th",{class:"text-right"},"Fat (g)"),e("th",{class:"text-right"},"Carbs (g)"),e("th",{class:"text-right"},"Protein (g)"),e("th",{class:"text-right"},"Sodium (mg)")])],-1),me=e("tbody",null,[e("tr",null,[e("td",{class:"text-left"},"Frozen Yogurt"),e("td",{class:"text-right"},"159"),e("td",{class:"text-right"},"6"),e("td",{class:"text-right"},"24"),e("td",{class:"text-right"},"4"),e("td",{class:"text-right"},"87")]),e("tr",null,[e("td",{class:"text-left"},"Ice cream sandwich"),e("td",{class:"text-right"},"237"),e("td",{class:"text-right"},"9"),e("td",{class:"text-right"},"37"),e("td",{class:"text-right"},"4.3"),e("td",{class:"text-right"},"129")]),e("tr",null,[e("td",{class:"text-left"},"Eclair"),e("td",{class:"text-right"},"262"),e("td",{class:"text-right"},"16"),e("td",{class:"text-right"},"23"),e("td",{class:"text-right"},"6"),e("td",{class:"text-right"},"337")]),e("tr",null,[e("td",{class:"text-left"},"Cupcake"),e("td",{class:"text-right"},"305"),e("td",{class:"text-right"},"3.7"),e("td",{class:"text-right"},"67"),e("td",{class:"text-right"},"4.3"),e("td",{class:"text-right"},"413")]),e("tr",null,[e("td",{class:"text-left"},"Gingerbread"),e("td",{class:"text-right"},"356"),e("td",{class:"text-right"},"16"),e("td",{class:"text-right"},"49"),e("td",{class:"text-right"},"3.9"),e("td",{class:"text-right"},"327")])],-1),fe=S({name:"AppTable"}),ge=Object.assign(fe,{setup(i){let c=q("vertical"),l=[{label:"Horizontal",value:"horizontal"},{label:"Vertical",value:"vertical"},{label:"Cell",value:"cell"},{label:"None",value:"none"}];return(u,t)=>{const r=n("q-option-group"),d=n("q-markup-table");return b(),j("div",pe,[a(r,{modelValue:y(c),"onUpdate:modelValue":t[0]||(t[0]=o=>M(c)?c.value=o:c=o),inline:"",class:"q-mb-md",options:y(l)},null,8,["modelValue","options"]),a(d,{separator:y(c),flat:"",bordered:""},{default:m(()=>[ue,me]),_:1},8,["separator"])])}}}),he={class:"container"},ve=S({name:"GalaxyNav"}),be=S({...ve,setup(i){const c=[{icon:"image",label:"单图像",router:"GalSPic",separator:!1},{icon:"add_photo_alternate",label:"多图像",router:"GalMPic",separator:!0},{icon:"location_pin",label:"单坐标",router:"GalSCoo",separator:!1},{icon:"add_location_alt",label:"多坐标",router:"GalMCoo",separator:!0}];let l=q("");return K(()=>{l.value="单图像"}),(u,t)=>{const r=n("q-icon"),d=n("q-item-section"),o=n("q-item"),f=n("q-separator"),p=n("q-list"),g=n("q-scroll-area"),w=n("q-drawer"),x=n("router-view"),h=J("ripple");return b(),j(D,null,[a(w,{"show-if-above":"",width:160,breakpoint:500,bordered:"",elevated:"",class:"drawer-container"},{default:m(()=>[a(g,{class:"fit"},{default:m(()=>[a(p,null,{default:m(()=>[(b(),j(D,null,Q(c,(_,v)=>(b(),j(D,{key:v},[X((b(),k(o,{clickable:"",active:_.label===y(l),onClick:s=>M(l)?l.value=_.label:l=_.label,to:{path:_.router}},{default:m(()=>[a(d,{avatar:""},{default:m(()=>[a(r,{name:_.icon},null,8,["name"])]),_:2},1024),a(d,null,{default:m(()=>[L(G(_.label),1)]),_:2},1024)]),_:2},1032,["active","onClick","to"])),[[h]]),_.separator?(b(),k(f,{key:"sep"+v})):F("",!0)],64))),64))]),_:1})]),_:1})]),_:1}),e("div",he,[a(x)])],64)}}}),P=(i,c)=>{const l=i.__vccOpts||i;for(const[u,t]of c)l[u]=t;return l},xe=P(be,[["__scopeId","data-v-e6d14a62"]]),ye={class:"container"},qe={class:"row items-start shadow-4 q-pa-sm q-gutter-md content-box"},we={class:"text-h4 text-orange-9"},$e={class:"text-h6 q-mt-sm q-mb-sm"},Se={class:"q-mt-sm text-body1"},Ce=["src"],je={class:"text-h6"},Ge={class:"text-subtitle2"},ke=S({name:"AppGalaxy"}),Oe=Object.assign(ke,{setup(i){const c=U();let l=q("category"),u=q("0.00%"),t=q("xxx"),r=q(""),d=q(""),o=q(""),f=q(""),p=q([]);const g="http://59.110.67.30:8080/predict",w="http://59.110.67.30:8080/coord_csv",x="http://59.110.67.30:8080/coord",h=()=>{let s=`${l.value}
${u.value}
${t.value}`;navigator.clipboard.writeText(s),navigator.clipboard.writeText(s).then(()=>{c.dialog({title:"提示",message:"已成功复制到粘贴板"}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{})})},_=[{name:"ra",required:!0,label:"RA",align:"left",field:s=>s.ra,sortable:!0},{name:"dec",label:"DEC",field:"dec"},{name:"main_id",label:"Main_ID",field:"main_id"},{name:"rvz_redshift",label:"Redshift",field:"rvz_redshift"},{name:"otype",label:"otype",field:"otype"},{name:"morph",label:"morph",field:"morph"},{name:"galdim_majaxis",label:"galdim_majaxis",field:"galdim_majaxis"}];let v=[];Y(p,()=>{r.value="",d.value="",o.value="",f.value="",v=[];for(const s of p.value){let O={ra:s.ra,dec:s.dec,main_id:s.main_id,rvz_redshift:s.rvz_redshift,otype:s.otype,morph:s.morph,galdim_majaxis:s.galdim_majaxis};v.push(O)}});for(const s of p.value){let O={ra:s.ra,dec:s.dec,main_id:s.main_id,rvz_redshift:s.rvz_redshift,otype:s.otype,morph:s.morph,galdim_majaxis:s.galdim_majaxis};row.push(O)}return C("category",l),C("conf",u),C("desc",t),C("profile",r),C("source",d),C("name",o),C("imageBase64",f),C("uploadImageUrl",g),C("uploadCoordUrl",w),C("coordUrl",x),C("info_table",p),(s,O)=>{const R=n("q-separator"),z=n("q-card-section"),B=n("q-btn"),E=n("q-space"),H=n("q-card-actions"),T=n("q-card"),W=n("q-table");return b(),j("div",ye,[a(xe,{class:"fixed-nav"}),e("div",qe,[a(T,{class:"my-card",flat:"",bordered:""},{default:m(()=>[a(z,null,{default:m(()=>[e("div",we,G(y(l)),1),e("div",$e,"置信度 "+G(y(u)),1),a(R,{color:"orange",inset:""}),e("div",Se,G(y(t)),1)]),_:1}),a(H,null,{default:m(()=>[a(B,{flat:"",color:"dark",label:"Share"}),a(B,{flat:"",color:"primary",label:"Copy",onClick:h}),a(E)]),_:1})]),_:1}),a(T,{class:"my-card"},{default:m(()=>[y(f)?(b(),j("img",{key:0,src:y(f)},null,8,Ce)):F("",!0),a(z,null,{default:m(()=>[e("div",je,G(y(o)),1),e("div",Ge,G(y(d)),1)]),_:1}),a(z,{class:"q-pt-none text-body1"},{default:m(()=>[L(G(y(r)),1)]),_:1}),y(p).length>0&&!y(r)?(b(),k(W,{key:1,grid:"",title:"搜索结果",rows:y(v),columns:_,"row-key":"name",filter:s.filter,"rows-per-page-options":[2],"card-container-class":"q-ml-sm","card-container-style":{width:"40vw"},"card-class":"bg-cyan-8 text-white text-weight-bold","card-style":{width:"10vw"},"hide-header":""},null,8,["rows","filter"])):F("",!0)]),_:1})])])}}}),Ue=P(Oe,[["__scopeId","data-v-c02da468"]]),Pe=e("img",{src:"https://cdn.quasar.dev/logo-v2/svg/logo-mono-white.svg"},null,-1),ze=S({name:"AppLayout"}),Ie=Object.assign(ze,{setup(i){const c=U(),l=q(!1),u=()=>{l.value=!l.value},t=q("Home"),r={Home:_e,Table:ge,File:Ue},d=q("light_mode"),o=()=>{d.value=d.value==="light_mode"?"dark_mode":"light_mode",c.dark.toggle()};return(f,p)=>{const g=n("q-btn"),w=n("q-avatar"),x=n("q-toolbar-title"),h=n("q-toolbar"),_=n("q-tab"),v=n("q-tabs"),s=n("q-header"),O=n("q-page-container"),R=n("q-layout");return b(),k(R,{view:"hHh LpR fFf"},{default:m(()=>[a(s,{elevated:"",class:"bg-cyan-8 text-white","height-hint":"98"},{default:m(()=>[a(h,null,{default:m(()=>[a(g,{dense:"",flat:"",round:"",icon:"menu",onClick:u}),a(x,{class:"text-h4"},{default:m(()=>[a(w,null,{default:m(()=>[Pe]),_:1}),L(" Hoshino Ai ")]),_:1}),a(g,{flat:"",round:"",dense:"",icon:d.value,onClick:o},null,8,["icon"])]),_:1}),a(v,{class:"text-h5",align:"left",modelValue:t.value,"onUpdate:modelValue":p[0]||(p[0]=z=>t.value=z)},{default:m(()=>[a(_,{name:"Form",icon:"fa-galaxy",label:"主页"}),a(_,{name:"File",icon:"fa-galaxy",label:"星系分类"})]),_:1},8,["modelValue"])]),_:1}),a(O,null,{default:m(()=>[(b(),k(Z,null,[(b(),k(ee(r[t.value])))],1024))]),_:1})]),_:1})}}}),Ne=S({__name:"App",setup(i){return(c,l)=>(b(),k(Ie))}}),Re={class:"q-mt-xl column items-start shadow-4 single-picture"},Ae=S({name:"GalaxySinglePicture"}),De=S({...Ae,setup(i){const c=U();let l=q("data:image/jpeg;base64,"),u=$("category"),t=$("uploadImageUrl"),r=$("conf"),d=$("desc"),o=$("profile"),f=$("source"),p=$("name"),g=$("imageBase64");const w=_=>({url:t,headers:[{name:"Accept",value:"application/json"}],fieldName:"files",method:"POST"}),x=_=>{const v=JSON.parse(_.xhr.response);u.value=v.category,r.value=v.confidence,d.value=v.description,p.value=v.represent.name,o.value=v.represent.profile,f.value=v.represent.source,g.value=`${l.value}${v.image}`};function h(_){c.notify({type:"negative",message:`${_.length} file(s) did not pass validation constraints`})}return(_,v)=>{const s=n("q-uploader");return b(),j("div",Re,[a(s,{class:"qup",label:"上传单张星系图像(≤10M)",factory:w,onUploaded:x,multiple:"","max-file-size":"10485760","max-files":"1",accept:".jpg, .jpeg, .png",onRejected:h,bordered:"",color:"cyan-8"})])}}}),Fe=P(De,[["__scopeId","data-v-d6373339"]]),Le={class:"q-mt-xl column items-start shadow-4 multi-picture"},Be=S({name:"GalaxySinglePicture"}),Te=S({...Be,setup(i){const c=U();let l=$("uploadImageUrl");const u=o=>{o.xhr.responseType="blob"},t=o=>({url:l,headers:[{name:"Accept",value:"application/json"}],fieldName:"files",method:"POST"}),r=o=>{let f=o.xhr.response;if(!(f instanceof Blob)){console.error("Response is not a Blob");return}const g=V.createWriteStream("images.zip").getWriter(),w=f.stream().getReader(),x=()=>w.read().then(({done:h,value:_})=>h?g.close():g.write(_).then(x));x().catch(h=>{console.error("Stream pump error:",h),g.abort(h)})};function d(o){c.notify({type:"negative",message:`${o.length} file(s) did not pass validation constraints`})}return(o,f)=>{const p=n("q-uploader");return b(),j("div",Le,[a(p,{class:"qup",label:"多幅图像类别标注(≤20×1M)",factory:t,onUploaded:r,onUploading:u,multiple:"","max-file-size":"1048576","max-files":"20",accept:".jpg, jpeg, .png",batch:"",onRejected:d,"no-thumbnails":"",bordered:"",color:"cyan-8"})])}}}),Me=P(Te,[["__scopeId","data-v-2cda1f36"]]),Ve=i=>(te("data-v-d34a0af1"),i=i(),ae(),i),Ee={class:"q-pa-md column single-coord"},He=Ve(()=>e("div",{id:"aladin-lite-div",class:"aladin"},null,-1)),We=S({name:"GalaxySingelCoord"}),Ke=Object.assign(We,{setup(i){const c=U(),l=q(!1);let u=$("category"),t=$("conf"),r=$("desc"),d=$("info_table"),o;A.init.then(()=>{o=A.aladin("#aladin-lite-div",{target:"NGC 1365",cooFrame:"ICRS",survey:"P/DESI-Legacy-Surveys/DR10/color",fov:.5})});const f=async()=>{l.value=!0;const p=o.getRaDec(),g=p[0],w=p[1],x=o.getFov()[0],h=parseInt(o.getSize()[0]),v=o.getBaseImageLayer().creatorDid;c.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"提交成功",position:"top"});const s=await I({url:"/coord",headers:{"Content-Type":"application/json"},method:"POST",data:{ra:g,dec:w,fov:x,size:h,surveyid:v}});l.value=!1,u.value=s.category,t.value=s.confidence,r.value=s.description,d.value=s.info_table};return(p,g)=>{const w=n("q-spinner-facebook"),x=n("q-btn");return b(),j("div",Ee,[He,e("div",null,[a(x,{color:"cyan-8",label:"获取类别",loading:l.value,onClick:f,style:{width:"8vw",height:"2.2vw"}},{loading:m(()=>[a(w)]),_:1},8,["loading"])])])}}}),Je=P(Ke,[["__scopeId","data-v-d34a0af1"]]),Qe={class:"q-mt-xl column items-start shadow-4 multi-coord"},Xe=S({name:"GalaxyMultiCoord"}),Ye=S({...Xe,setup(i){const c=U();let l=$("uploadCoordUrl");const u=o=>{o.xhr.responseType="blob"},t=o=>({url:l,headers:[{name:"Accept",value:"application/json"}],fieldName:"file",method:"POST"}),r=o=>{let f=o.xhr.response;if(!(f instanceof Blob)){console.error("Response is not a Blob");return}const g=V.createWriteStream("images.zip").getWriter(),w=f.stream().getReader(),x=()=>w.read().then(({done:h,value:_})=>h?g.close():g.write(_).then(x));x().catch(h=>{console.error("Stream pump error:",h),g.abort(h)})};function d(o){c.notify({type:"negative",message:`${o.length} file(s) did not pass validation constraints`})}return(o,f)=>{const p=n("q-uploader");return b(),j("div",Qe,[a(p,{class:"qup",label:"上传星系坐标csv",factory:t,onUploaded:r,onUploading:u,multiple:"","max-file-size":"1048576","max-files":"1",accept:".csv",batch:"",onRejected:d,"no-thumbnails":"",bordered:"",color:"cyan-8"})])}}}),Ze=P(Ye,[["__scopeId","data-v-71e51bea"]]),et=re({history:ce(),routes:[{path:"/GalSPic",component:Fe},{path:"/GalMPic",component:Me},{path:"/GalSCoo",component:Je},{path:"/GalMCoo",component:Ze}]});I.interceptors.request.use(i=>(i.baseURL="http://127.0.0.1:8080",i));I.interceptors.response.use(i=>(console.log("响应成功"),i.data),i=>(console.log("响应失败",i),new Promise(()=>{})));const N=oe(Ne);N.use(et);N.use(I);N.use(se,{plugins:{Dialog:le,Notify:ne}});N.mount("#app");
